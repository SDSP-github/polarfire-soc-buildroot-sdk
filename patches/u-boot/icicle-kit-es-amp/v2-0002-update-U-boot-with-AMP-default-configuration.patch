From 864612add63a9e8779abfe76af994c0fb049ff3a Mon Sep 17 00:00:00 2001
From: Valentina Fernandez <valentina.fernandezalanis@microchip.com>
Date: Mon, 7 Mar 2022 13:29:54 +0000
Subject: [PATCH] update U-boot with AMP default configuration

---
 arch/riscv/dts/microchip-mpfs-icicle-kit.dts | 26 +++++++++++++++++++-
 1 file changed, 25 insertions(+), 1 deletion(-)

diff --git a/arch/riscv/dts/microchip-mpfs-icicle-kit.dts b/arch/riscv/dts/microchip-mpfs-icicle-kit.dts
index 616019dc8d..5e6b2a635f 100644
--- a/arch/riscv/dts/microchip-mpfs-icicle-kit.dts
+++ b/arch/riscv/dts/microchip-mpfs-icicle-kit.dts
@@ -50,6 +50,22 @@
 			reg = <0x0 0xd0000000 0x0 0x8000000>;
 			label = "fabricbuf2-ddr-nc-wcb";
 		};
+
+		contextb_reserved: contextb_reserved@0x1075BB0000 {
+			reg = <0x10 0x75BB0000 0x0 0x400000>;
+			no-map;
+		};
+
+		rpmsg_vrings_reserved: rpmsg_vrings@0x1075FB0000 {
+			reg = <0x10 0x75FB0000 0x0 0x10000>;
+			no-map;
+		};
+
+		rpmsg_dma_reserved: rpmsg_dma@0x1075FC0000 {
+			compatible = "shared-dma-pool";
+			reg = <0x10 0x75FC0000 0x0 0x40000>;
+			label = "rpmsg-ddr";
+		};
 	};
 
 	udmabuf0 {
@@ -81,16 +97,24 @@
 
 	ddrc_cache: memory@1000000000 {
 		device_type = "memory";
-		reg = <0x10 0x0 0x0 0x76000000>;
+		reg = <0x10 0x0 0x0 0x75BB0000>;
 		clocks = <&clkcfg CLK_DDRC>;
 		status = "okay";
 	};
 };
 
+&cpu4 {
+	status = "disabled"; // in use by context b
+};
+
 &uart1 {
 	status = "okay";
 };
 
+&uart3 {
+	status = "disabled";
+};
+
 &mmc {
 	status = "okay";
 
-- 
2.25.1
